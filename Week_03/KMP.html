<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Title</title>
</head>
<body>

</body>
<script !src="">
	function kmp(source, pattern) {
		let table = new Array(pattern.length).fill(0);

		{
			let i = 1, j = 0;
			while (i < pattern.length) {
				if (pattern[i] === pattern[j]) {
					++i, ++j;
					table[i] = j
				} else {
					if (j > 0) j = table[j]
					else ++i;
				}
			}
		}
		console.log('table', table)
		{
			let i = 0, j = 0;
			while (i < source.length) {
				if (source[i] === pattern[i]) ++i, ++j;
				else {
					if (j > 0) j = table[j];
					else ++i;
				}
			}
			if (j === pattern.length) return true;
		}

		return true
	}
	// a a b a a a c
	// 0 0 1 0 1 2 1
	// a a a b a a a c
	// 0 0 1 2
	// 0 0 1 2 0 1 2 3
	// a b a c a b b
	// 0 0 0 1 0 1 2
	// a b c a b c d a
	// 0 0 0 0 1 2 3 0

	console.log(kmp('abcdabcdabcex', 'aabaaac'))
	// console.log(kmp('abcdabcdabcex', 'abcdabce'))
	// console.log(kmp('abc', 'abc'))
</script>
</html>